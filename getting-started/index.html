
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
  
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The kluster.ai getting started guide provides examples and instructions for submitting and managing Batch jobs using kluster.ai's OpenAI-compatible API.">
      
      
      
        <link rel="canonical" href="https://papermoonio.github.io/kluster.ai-docs/getting-started/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
  

    <title>Getting Started Guide | Documentation for kluster.ai</title>
    
	
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
  <link rel="stylesheet" href="../assets/stylesheets/kluster.css">

    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"DM Sans";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/terminal.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      
  
    
  
  <header class="md-header md-header--shadow" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Header">
      <label class="md-header__button md-icon" for="__drawer">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
      </label>
      <a href="https://kluster.ai/" title="kluster.ai" class="md-header__button md-logo" aria-label="kluster.ai" data-md-component="logo">
        
  <img src="../assets/images/logo.png" alt="logo">

      </a>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
              Documentation for kluster.ai
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
          </div>
        </div>
      </div>
      
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
      
    </nav>
    
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
  
  
  
    
  
  <nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
    <label class="md-nav__title" for="__drawer">
      <a href="https://kluster.ai/" title="kluster.ai" class="md-nav__button md-logo" aria-label="kluster.ai" data-md-component="logo">
        
  <img src="../assets/images/logo.png" alt="logo">

      </a>
    </label>
    
    <ul class="md-nav__list" data-md-scrollfix>
      
        
        
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting Started Guide
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting Started Guide
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-your-api-key" class="md-nav__link">
    <span class="md-ellipsis">
      Get Your API Key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-supported-models" class="md-nav__link">
    <span class="md-ellipsis">
      List Supported Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-batch-file-with-a-collection-of-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Batch File with a Collection of Jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upload-your-batch-input-file" class="md-nav__link">
    <span class="md-ellipsis">
      Upload Your Batch Input File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#invoke-the-chat-completion-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Invoke the Chat Completion Endpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitor-the-progress-of-the-batch-job" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor the Progress of the Batch Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieve-the-file-content-of-the-batch-job" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieve the File Content of the Batch Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-all-batch-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      List all Batch Jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-a-batch-job" class="md-nav__link">
    <span class="md-ellipsis">
      Cancelling a Batch Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
    <nav class="md-nav" aria-label="References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-batch-object" class="md-nav__link">
    <span class="md-ellipsis">
      The Batch Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-file-object" class="md-nav__link">
    <span class="md-ellipsis">
      The File Object
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

      
    </ul>
  </nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
    
    <article class="md-content__inner md-typeset ">
      
        


<h1 id="getting-started-guide">Getting started guide<a class="headerlink" href="#getting-started-guide" title="Permanent link">＃</a></h1>
<p>Welcome to the Kluster.ai getting started guide! This guide provides a quick introduction to submitting Batch jobs.</p>
<p>Kluster.ai is API-compatible with the OpenAI library, supporting <code>model</code>, <code>messages</code>, and <code>stream</code> functions. If additional request properties are needed, they can be requested during the Early Access Plan. To install the OpenAI Python library, follow the <a href="https://platform.openai.com/docs/libraries/python-library" target="_blank">instructions</a> on OpenAI's documentation.</p>
<p>OpenAI object definitions are included to help you get started. For more details, refer to the OpenAI <a href="https://platform.openai.com/docs/api-reference/introduction" target="_blank">API reference</a>. The following sections offer Curl and Python examples on locating the API key, defining Batch jobs as a JSON Lines file, uploading the file to the Kluster.ai endpoint, invoking the chat completion endpoint, monitoring job progress, retrieving results, listing Batch objects, and canceling requests.</p>
<h2 id="get-your-api-key">Get Your API Key<a class="headerlink" href="#get-your-api-key" title="Permanent link">＃</a></h2>
<p>Navigate to the <a href="http://platform.kluster.ai" target="_blank">platform.kluster.ai</a> web app and select <strong>API Keys</strong> from the left-hand menu. Create a new API key by specifying the API key name. You'll need this to set the auth header in all of the API requests.</p>
<h2 id="list-supported-models">List Supported Models<a class="headerlink" href="#list-supported-models" title="Permanent link">＃</a></h2>
<p>First, you can use the models endpoint to list out the supported models that. Currently, only Meta-Llama-3.1-8B-Instruct, Meta-Llama-3.1-70B-Instruct, and Meta-Llama-3.1-405B-Instruct are supported. The response is a list of model objects.</p>
<div class="grid">
<div>
<p><strong>Request</strong></p>
<p><code>get https://api.kluster.ai/v1/models</code></p>
<p>Lists the currently available models.</p>
<p><strong>Returns</strong></p>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The model identifier, which can be referenced in the API endpoints.</p>
<hr />
<p><code>created</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) when the model was created.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>model</code>.</p>
<hr />
<p><code>owned_by</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The organization that owns the model.</p>
</div>
<div>
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>curl<span class="w"> </span>https://api.kluster.ai/v1/models<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span><span class="w"> </span>
</code></pre></div>
<div class="highlight"><span class="filename">Response</span><pre><span></span><code><span class="p">[</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-70B-Instruct&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="s2">&quot;1970-01-01T00:00:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;owned_by&quot;</span><span class="p">:</span><span class="s2">&quot;owner1&quot;</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-8B-Instruct&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="s2">&quot;1970-01-01T00:00:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;owned_by&quot;</span><span class="p">:</span><span class="s2">&quot;owner2&quot;</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-405B-Instruct&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="s2">&quot;1970-01-01T00:00:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;owned_by&quot;</span><span class="p">:</span><span class="s2">&quot;owner3&quot;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
</div>
</div>
<hr />
<h2 id="create-a-batch-file-with-a-collection-of-jobs">Create a Batch File with a Collection of Jobs<a class="headerlink" href="#create-a-batch-file-with-a-collection-of-jobs" title="Permanent link">＃</a></h2>
<p>Create a <a href="https://jsonlines.org/">JSON Lines</a> file containing a collection of <code>batch request input</code> objects. The body of each request is a <code>chat completion</code> object with the endpoint <code>/v1/chat/completions</code>. Each request must include a unique <code>custom_id</code> used to reference results after the Batch job has been completed.</p>
<div class="grid">
<div>
<p><strong>Batch request input object</strong></p>
<p><code>custom_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>A developer-provided per-request ID that will be used to match outputs to inputs. Must be unique for each request in a Batch.</p>
<hr />
<p><code>method</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The HTTP method to be used for the request. Currently, only <code>POST</code> is supported.</p>
<hr />
<p><code>url</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The <code>/v1/chat/completions</code> API relative URL.</p>
<hr />
<p><strong>Request body</strong></p>
<p><code>body</code> <span class="keys"><kbd>object</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>The request body object (chat completion object).</p>
<details class="child">
<summary>Show properties</summary>
<p><code>model</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>ID of the model to use. See the model endpoint compatibility table for details on which models work with the Chat API.</p>
<hr />
<p><code>messages</code> <span class="keys"><kbd>array</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>A list of messages comprising the conversation so far.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>role</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>The role of the messages author, in this case <code>assistant</code>.</p>
<hr />
<p><code>content</code> <span class="keys"><kbd>string or array</kbd></span></p>
<p>The contents of the assistant message.  </p>
<hr />
<p><code>refusal</code> <span class="keys"><kbd>string or null</kbd></span></p>
<p>The refusal message by the assistant.</p>
<hr />
<p><code>name</code> <span class="keys"><kbd>string</kbd></span></p>
<p>An optional name for the participant. Provides the model information to differentiate between participants of the same role.</p>
</details>
<hr />
<p><code>store</code> <span class="keys"><kbd>boolean or null</kbd></span></p>
<p>Whether or not to store the output of this chat completion request for use in our model distillation or evals products. Defaults to <code>false</code>.</p>
<hr />
<p><code>metadata</code> <span class="keys"><kbd>object or null</kbd></span></p>
<p>Developer-defined tags and values used for filtering completions in the dashboard.</p>
<hr />
<p><code>frequency_penalty</code> <span class="keys"><kbd>number or null</kbd></span></p>
<p>Number between -2.0 and 2.0. Positive values penalize new tokens based on their existing frequency in the text so far, decreasing the model's likelihood of repeating the same line verbatim. Defaults to <code>0</code>.</p>
<hr />
<p><code>logit_bias</code> <span class="keys"><kbd>map</kbd></span></p>
<p>Modify the likelihood of specified tokens appearing in the completion. Defaults to <code>null</code>.</p>
<p>Accepts a JSON object that maps tokens (specified by their token ID in the tokenizer) to an associated bias value from -100 to 100. Mathematically, the bias is added to the logits generated by the model prior to sampling. The exact effect will vary per model, but values between -1 and 1 should decrease or increase the likelihood of selection; values like -100 or 100 should result in a ban or exclusive selection of the relevant token.</p>
<hr />
<p><code>logprobs</code> <span class="keys"><kbd>boolean or null</kbd></span></p>
<p>Whether to return log probabilities of the output tokens or not. If true, returns the log probabilities of each output token returned in the <code>content</code> of <code>message</code>. Defaults to <code>false</code>.</p>
<hr />
<p><code>top_logprobs</code> <span class="keys"><kbd>integer or null</kbd></span></p>
<p>An integer between 0 and 20 specifying the number of most likely tokens to return at each token position, each with an associated log probability. <code>logprobs</code> must be set to <code>true</code> if this parameter is used.</p>
<hr />
<p><code>max_tokens</code> <span class="keys"><kbd>integer or null</kbd></span> <em>deprecated</em></p>
<p>This value is now deprecated in favor of <code>max_completion_tokens</code>.</p>
<p>The maximum number of tokens that can be generated in the chat completion. This value can be used to control costs for text generated via API.</p>
<hr />
<p><code>max_completion_tokens</code> <span class="keys"><kbd>integer or null</kbd></span></p>
<p>An upper bound for the number of tokens that can be generated for a completion, including visible output tokens and reasoning tokens.</p>
<hr />
<p><code>n</code> <span class="keys"><kbd>integer or null</kbd></span></p>
<p>The number of chat completion choices to generate for each input message. Note that you will be charged based on the number of generated tokens across all of the choices. Keep <code>n</code> as <code>1</code> to minimize costs. Defaults to <code>1</code>.</p>
<hr />
<p><code>presence_penalty</code> <span class="keys"><kbd>number or null</kbd></span></p>
<p>Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics. Defaults to <code>0</code>.</p>
<hr />
<p><code>response_format</code> <span class="keys"><kbd>object</kbd></span></p>
<p>An object specifying the format that the model must output. Compatible with Meta-Llama-3.1-8B-Instruct, Meta-Llama-3.1-70B-Instruct, and Meta-Llama-3.1-405B-Instruct.</p>
<p>Setting to <code>{ "type": "json_schema", "json_schema": {...} }</code> enables Structured Outputs which ensures the model will match your supplied JSON schema.</p>
<p>Setting to <code>{ "type": "json_object" }</code> enables JSON mode, which ensures the message the model generates is valid JSON.</p>
<p><strong>Important:</strong> when using JSON mode, you <strong>must</strong> also instruct the model to produce JSON yourself via a system or user message. Without this, the model may generate an unending stream of whitespace until the generation reaches the token limit, resulting in a long-running and seemingly "stuck" request. Also note that the message content may be partially cut off if <code>finish_reason="length"</code>, which indicates the generation exceeded <code>max_tokens</code> or the conversation exceeded the max context length.</p>
<hr />
<p><code>seed</code> <span class="keys"><kbd>integer or null</kbd></span></p>
<p>This feature is in Beta. If specified, our system will make a best effort to sample deterministically, such that repeated requests with the same <code>seed</code> and parameters should return the same result. Determinism is not guaranteed, and you should refer to the <code>system_fingerprint</code> response parameter to monitor changes in the backend.</p>
<hr />
<p><code>service_tier</code> <span class="keys"><kbd>string or null</kbd></span></p>
<p>Specifies the latency tier to use for processing the request. Defaults to <code>null</code>. This parameter is relevant for customers subscribed to the scale tier service:</p>
<ul>
<li>If set to <code>auto</code>, and the Project is Scale tier enabled, the system will utilize scale tier credits until they are exhausted</li>
<li>If set to <code>auto</code>, and the Project is not Scale tier enabled, the request will be processed using the default service tier with a lower uptime SLA and no latency guarantee</li>
<li>If set to <code>default</code>, the request will be processed using the default service tier with a lower uptime SLA and no latency guarantee</li>
<li>When not set, the default behavior is <code>auto</code></li>
<li>When this parameter is set, the response body will include the <code>service_tier</code> utilized</li>
</ul>
<hr />
<p><code>stop</code> <span class="keys"><kbd>string or array or null</kbd></span></p>
<p>Up to four sequences where the API will stop generating further tokens. Defaults to <code>null</code>.</p>
<hr />
<p><code>stream</code> <span class="keys"><kbd>boolean or null</kbd></span></p>
<p>If set, partial message deltas will be sent, like in ChatGPTpl. Tokens will be sent as data-only server-sent events as they become available, with the stream terminated by a <code>data: [DONE]</code> message. Defaults to <code>false</code>.</p>
<hr />
<p><code>stream_options</code> <span class="keys"><kbd>object or null</kbd></span></p>
<p>Options for streaming response. Only set this when you set <code>stream: true</code>. Defaults to <code>null</code></p>
<hr />
<p><code>temperature</code> <span class="keys"><kbd>number or null</kbd></span></p>
<p>The sampling temperature to use, between 0 and 2. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic. Defaults to <code>1</code>.</p>
<p>It is generally recommended to alter this or <code>top_p</code> but not both.</p>
<hr />
<p><code>top_p</code> <span class="keys"><kbd>number or null</kbd></span></p>
<p>An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass. So 0.1 means only the tokens comprising the top 10% probability mass are considered. Defaults to <code>1</code>.</p>
<p>It is generally recommended to alter this or <code>temperature</code> but not both.</p>
<hr />
<p><code>tools</code> <span class="keys"><kbd>array</kbd></span></p>
<p>A list of tools the model may call. Currently, only functions are supported as a tool. Use this to provide a list of functions the model may generate JSON inputs for. A max of 128 functions are supported.</p>
<hr />
<p><code>tool_choice</code> <span class="keys"><kbd>string or object</kbd></span></p>
<p>Controls which (if any) tool is called by the model.</p>
<ul>
<li><code>none</code> means the model will not call any tool and instead generates a message</li>
<li><code>auto</code> means the model can pick between generating a message or calling one or more tools</li>
<li><code>required</code> means the model must call one or more tools. Specifying a particular tool via <code>{"type": "function", "function": {"name": "my_function"}}</code> forces the model to call that tool</li>
</ul>
<p><code>none</code> is the default when no tools are present. <code>auto</code> is the default if tools are present.</p>
<hr />
<p><code>parallel_tool_calls</code> <span class="keys"><kbd>boolean</kbd></span></p>
<p>Whether to enable <a href="https://platform.openai.com/docs/guides/function-calling/parallel-function-calling" target="_blank"><strong>parallel function calling</strong></a> during tool use. Defaults to <code>true</code>.</p>
<hr />
<p><code>user</code> <span class="keys"><kbd>string</kbd></span></p>
<p>A unique identifier representing your end-user, which can help OpenAI to monitor and detect abuse.</p>
<hr />
<p><code>function_call</code> <span class="keys"><kbd>string or object</kbd></span> <em>deprecated</em></p>
<p>This value is now deprecated in favor of <code>tool_choice</code>.</p>
<p>Controls which (if any) function is called by the model.</p>
<ul>
<li><code>none</code> means the model will not call a function and instead generates a message</li>
<li><code>auto</code> means the model can pick between generating a message or calling a function. Specifying a particular function via <code>{"name": "my_function"}</code> forces the model to call that function</li>
</ul>
<p><code>none</code> is the default when no functions are present. <code>auto</code> is the default if functions are present.</p>
<hr />
<p><code>functions</code> <span class="keys"><kbd>array</kbd></span> <em>deprecated</em></p>
<p>This value is now deprecated in favor of <code>tools</code>.</p>
<p>A list of functions the model may generate JSON inputs for.</p>
</details>
<p><strong>Returns</strong></p>
<p>A chat completion object, or a streamed sequence of chat completion chunk objects if the request is streamed.</p>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>A unique identifier for the chat completion.</p>
<hr />
<p><code>choices</code> <span class="keys"><kbd>array</kbd></span></p>
<p>A list of chat completion choices. Can be more than one if <code>n</code> is greater than <code>1</code>.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>finish_reason</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The reason the model stopped generating tokens. This will be <code>stop</code> if the model hit a natural stop point or a provided stop sequence, <code>length</code> if the maximum number of tokens specified in the request was reached, <code>content_filter</code> if content was omitted due to a flag from our content filters, <code>tool_calls</code> if the model called a tool, or <code>function_call</code> (deprecated) if the model called a function.</p>
<hr />
<p><code>index</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The index of the choice in the list of choices.</p>
<hr />
<p><code>message</code> <span class="keys"><kbd>object</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>A chat completion message generated by the model.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>content</code> <span class="keys"><kbd>array or null</kbd></span></p>
<p>A list of message content tokens with log probability information.</p>
<hr />
<p><code>refusal</code> <span class="keys"><kbd>array or null</kbd></span></p>
<p>A list of message refusal tokens with log probability information.</p>
<hr />
<p><code>tool_calls</code> <span class="keys"><kbd>array</kbd></span></p>
<p>The tool calls generated by the model, such as function calls.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the tool call.</p>
<hr />
<p><code>type</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The type of the tool. Currently, only <code>function</code> is supported.</p>
<hr />
<p><code>function</code> <span class="keys"><kbd>object</kbd></span> <span class="required" markdown><span class="keys"><kbd>required</kbd></span></span></p>
<p>The function that the model called.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>name</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The name of the function to call.</p>
<hr />
<p><code>arguments</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function.</p>
</details>
</details>
<hr />
<p><code>role</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The role of the author of this message.</p>
<hr />
<p><code>function_call</code> <span class="keys"><kbd>object</kbd></span> <em>deprecated</em></p>
<p>This value is now deprecated in favor of <code>tool_calls</code>. The name and arguments of a function that should be called, as generated by the model.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>arguments</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The arguments to call the function with, as generated by the model in JSON format. Note that the model does not always generate valid JSON and may hallucinate parameters not defined by your function schema. Validate the arguments in your code before calling your function.</p>
<hr />
<p><code>name</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The name of the function to call.      </p>
</details>
</details>
<hr />
<p><code>logprobs</code> <span class="keys"><kbd>object or null</kbd></span></p>
<p>Log probability information for the choice.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>content</code> <span class="keys"><kbd>array or null</kbd></span></p>
<p>A list of message content tokens with log probability information.</p>
<hr />
<p><code>refusal</code> <span class="keys"><kbd>array or null</kbd></span></p>
<p>A list of message refusal tokens with log probability information.</p>
</details>
</details>
<hr />
<p><code>created</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) of when the chat completion was created.</p>
<hr />
<p><code>model</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The model used for the chat completion.</p>
<hr />
<p><code>service_tier</code> <span class="keys"><kbd>string or null</kbd></span></p>
<p>The service tier used for processing the request. This field is only included if the <code>service_tier</code> parameter is specified in the request.</p>
<hr />
<p><code>system_fingerprint</code> <span class="keys"><kbd>string</kbd></span></p>
<p>This fingerprint represents the backend configuration that the model runs with. It can be used in conjunction with the <code>seed</code> request parameter to understand when backend changes have been made that might impact determinism.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>chat.completion</code>.</p>
<hr />
<p><code>usage</code> <span class="keys"><kbd>object</kbd></span></p>
<p>Usage statistics for the completion request.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>completion_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Number of tokens in the generated completion.</p>
<hr />
<p><code>prompt_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Number of tokens in the prompt.</p>
<hr />
<p><code>total_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Total number of tokens used in the request (prompt + completion).</p>
<hr />
<p><code>completion_tokens_details</code> <span class="keys"><kbd>object</kbd></span></p>
<p>Breakdown of tokens used in a completion.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>audio_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Audio input tokens generated by the model.</p>
<hr />
<p><code>reasoning_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Tokens generated by the model for reasoning.</p>
</details>
<hr />
<p><code>prompt_tokens_details</code> <span class="keys"><kbd>object</kbd></span></p>
<p>Breakdown of tokens used in the prompt.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>audio_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Audio input tokens present in the prompt.</p>
<hr />
<p><code>cached_tokens</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Cached tokens present in the prompt.</p>
</details>
</details>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Curl</label><label for="__tabbed_1_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example: Collection of Batch Jobs</span><pre><span></span><code><span class="p">{</span><span class="nt">&quot;custom_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;request-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-8B-Instruct&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;system&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;What is the capital of Argentina?&quot;</span><span class="p">}],</span><span class="nt">&quot;max_tokens&quot;</span><span class="p">:</span><span class="mi">1000</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;custom_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;request-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-70B-Instruct&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;system&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are an experienced maths tutor.&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Explain the Pythagorean theorem to a 10 year old child&quot;</span><span class="p">}],</span><span class="nt">&quot;max_tokens&quot;</span><span class="p">:</span><span class="mi">1000</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;custom_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;request-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;meta-llama/Meta-Llama-3.1-405B-Instruct&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;system&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;What is the distance between the Earth and the Moon&quot;</span><span class="p">}],</span><span class="nt">&quot;max_tokens&quot;</span><span class="p">:</span><span class="mi">1000</span><span class="p">}}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example: Collection of Batch Jobs</span><pre><span></span><code><span class="n">tasks</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s2">&quot;custom_id&quot;</span><span class="p">:</span> <span class="s2">&quot;request-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;meta-llama/Meta-Llama-3.1-8B-Instruct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of Argentina?&quot;</span><span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;custom_id&quot;</span><span class="p">:</span> <span class="s2">&quot;request-2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;meta-llama/Meta-Llama-3.1-70B-Instruct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a maths tutor.&quot;</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an experienced maths tutor.&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain the Pythagorean theorem.&quot;</span><span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;custom_id&quot;</span><span class="p">:</span> <span class="s2">&quot;request-3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;meta-llama/Meta-Llama-3.1-405B-Instruct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an astronomer.&quot;</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an experienced maths tutor.&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the distance between the Earth and the Moon?&quot;</span><span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="c1"># Additional tasks can be added here</span>
<span class="p">]</span>

<span class="c1"># Save tasks to a JSONL file (newline-delimited JSON)</span>
<span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;batch_tasks.jsonl&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">task</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
<hr />
<h2 id="upload-your-batch-input-file">Upload Your Batch Input File<a class="headerlink" href="#upload-your-batch-input-file" title="Permanent link">＃</a></h2>
<p><code>https://api.kluster.ai/v1/files</code></p>
<p>Upload a <a href="https://jsonlines.org/" target="_blank">JSON Lines</a> document to the Kluster.ai endpoint and take a note of the <code>id</code> in the response object.</p>
<div class="grid">
<div>
<p><strong>Request</strong></p>
<p><code>file</code> <span class="keys"><kbd>file</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The <a href="#the-file-object">File</a> object (not file name) to be uploaded.</p>
<hr />
<p><code>purpose</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The intended purpose of the uploaded file. Use <code>batch</code> for the Batch API.</p>
<p><strong>Returns</strong></p>
<p>The uploaded <a href="#the-file-object">File</a> object.</p>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The file identifier, which can be referenced in the API endpoints.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>file</code>.</p>
<hr />
<p><code>bytes</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The size of the file, in bytes.</p>
<hr />
<p><code>created_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the file was created.</p>
<hr />
<p><code>filename</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The name of the file.</p>
<hr />
<p><code>purpose</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The intended purpose of the file. Currently, only <code>batch</code> is supported.</p>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Curl</label><label for="__tabbed_2_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://api.kluster.ai/v1/files<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: multipart/form-data&quot;</span><span class="w"> </span><span class="se">\</span>
-F<span class="w"> </span><span class="s2">&quot;file=@mybatchtest.jsonl&quot;</span><span class="w"> </span><span class="se">\</span>
-F<span class="w"> </span><span class="s2">&quot;purpose=batch&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code><span class="c1"># Upload the file to the platform</span>
<span class="n">batch_file</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s2">&quot;batch&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Batch file uploaded. File ID: </span><span class="si">{</span><span class="n">batch_file</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
<hr />
<h2 id="invoke-the-chat-completion-endpoint">Invoke the Chat Completion Endpoint<a class="headerlink" href="#invoke-the-chat-completion-endpoint" title="Permanent link">＃</a></h2>
<p><code>post https://api.kluster.ai/v1/batches</code></p>
<p>Next, to create a Batch job, you invoke the chat completion API using the <code>input_file_id</code> from the previous step.</p>
<div class="grid">
<div>
<p><strong>Request</strong></p>
<p><code>input_file_id</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The ID of an uploaded file that contains requests for the new Batch.</p>
<p>Your input file must be formatted as a <a href="https://jsonlines.org/" target="_blank">JSONL file</a>, and must be uploaded with the purpose <code>batch</code>. The file can contain up to 50,000 requests, and can be up to 100 MB in size.</p>
<hr />
<p><code>endpoint</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The endpoint to be used for all requests in the Batch. Currently, only <code>/v1/chat/completions</code> is supported.</p>
<hr />
<p><code>completion_window</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The time frame within which the Batch should be processed. Currently, only <strong>24h</strong> is supported.</p>
<hr />
<p><code>metadata</code> <span class="keys"><kbd>Object or null</kbd></span></p>
<p>Custom metadata for the Batch.</p>
<p><strong>Returns</strong></p>
<p>The created <a href="#batch-object">Batch</a> object.</p>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the batch.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>batch</code>.</p>
<hr />
<p><code>endpoint</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The Kluster.ai API endpoint used by the batch.</p>
<hr />
<p><code>errors</code> <span class="keys"><kbd>object</kbd></span></p>
<p>Show properties.</p>
<hr />
<p><code>input_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the input file for the batch.</p>
<hr />
<p><code>completion_window</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The time frame within which the batch should be processed.</p>
<hr />
<p><code>status</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The current status of the batch.</p>
<hr />
<p><code>output_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the file containing the outputs of successfully executed requests.</p>
<hr />
<p><code>error_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the file containing the outputs of requests with errors.</p>
<hr />
<p><code>created_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was created.</p>
<hr />
<p><code>in_progress_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started processing.</p>
<hr />
<p><code>expires_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch will expire.</p>
<hr />
<p><code>finalizing_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started finalizing.</p>
<hr />
<p><code>completed_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was completed.</p>
<hr />
<p><code>failed_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch failed.</p>
<hr />
<p><code>expired_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch expired.</p>
<hr />
<p><code>cancelling_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started cancelling.</p>
<hr />
<p><code>cancelled_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was cancelled.</p>
<hr />
<p><code>request_counts</code> <span class="keys"><kbd>object</kbd></span></p>
<p>The request counts for different statuses within the Batch.</p>
<hr />
<p><code>metadata</code> <span class="keys"><kbd>map</kbd></span></p>
<p>Set of 16 key-value pairs that can be attached to an object. This is useful for storing additional information about the object in a structured format. Keys can be a maximum of 64 characters long, and values can be a maximum of 512 characters long.</p>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Curl</label><label for="__tabbed_3_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://api.kluster.ai/v1/batches<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">&quot;input_file_id&quot;: &quot;kluster-file-123&quot;,</span>
<span class="s1">&quot;endpoint&quot;: &quot;/v1/chat/completions&quot;,</span>
<span class="s1">&quot;completion_window&quot;: &quot;24h&quot;</span>
<span class="s1">}&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code><span class="c1"># Submit the batch request</span>
<span class="n">batch_request</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">input_file_id</span><span class="o">=</span><span class="n">batch_file</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
    <span class="n">completion_window</span><span class="o">=</span><span class="s2">&quot;24h&quot;</span><span class="p">,</span>  <span class="c1"># Maximum time allowed for the batch to complete</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Batch job for chat completions&quot;</span><span class="p">},</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Batch request submitted. Batch ID: </span><span class="si">{</span><span class="n">batch_request</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Response</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2b96e3e4-cd7b-43fd-9dd3-d82153bdd752&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;input_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-input-file-123&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completion_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;24h&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Validating&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;output_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-07T12:45:38.109049154Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;in_progress_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-08T12:45:38.109049154Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finalizing_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;failed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;expired_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cancelling_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cancelled_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;request_counts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;failed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<hr />
<h2 id="monitor-the-progress-of-the-batch-job">Monitor the Progress of the Batch Job<a class="headerlink" href="#monitor-the-progress-of-the-batch-job" title="Permanent link">＃</a></h2>
<p><code>get https://api.kluster.ai/v1/batches/{batch_id}</code></p>
<p>To verify that the Batch job has finished, check the <code>status</code> property for <code>completed</code> using the Batch id from the previous step.</p>
<div class="grid">
<div>
<p><strong>Path parameters</strong></p>
<p><code>batch_id</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The ID of the Batch to retrieve.</p>
<p><strong>Returns</strong></p>
<p>The <a href="#the-batch-object">Batch</a> object matching the specified <code>id</code>.</p>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Curl</label><label for="__tabbed_4_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://api.kluster.ai/v1/batches/2b96e3e4-cd7b-43fd-9dd3-d82153bdd752<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Poll the batch status until it&#39;s complete</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">batch_status</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">batch_request</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Batch status: </span><span class="si">{</span><span class="n">batch_status</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Completed tasks: </span><span class="si">{</span><span class="n">batch_status</span><span class="o">.</span><span class="n">request_counts</span><span class="o">.</span><span class="n">completed</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">batch_status</span><span class="o">.</span><span class="n">request_counts</span><span class="o">.</span><span class="n">total</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">batch_status</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;completed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;canceled&quot;</span><span class="p">]:</span>
        <span class="k">break</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># Wait for 10 seconds before checking again</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Response</span><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2b96e3e4-cd7b-43fd-9dd3-d82153bdd752&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;input_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-input-file-123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;completion_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;24h&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Completed&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;output_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-output-file-123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-07T13:08:52.821427Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;in_progress_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-08T13:08:52.821427Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;finalizing_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;completed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;failed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expired_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cancelling_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cancelled_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_counts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;failed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<hr />
<h2 id="retrieve-the-file-content-of-the-batch-job">Retrieve the File Content of the Batch Job<a class="headerlink" href="#retrieve-the-file-content-of-the-batch-job" title="Permanent link">＃</a></h2>
<p><code>get https://api.kluster.ai/v1/files/{file_id}/content</code></p>
<p>To retrieve the file content of the Batch job, send a request to the <code>files</code> end point specifying the <code>output_file_id</code> and redirecting standard output to a file.</p>
<div class="grid">
<div>
<p><strong>Path parameters</strong></p>
<p><code>file_id</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The ID of the file to use for this request</p>
<p><strong>Returns</strong></p>
<p>The output file content matching the specified file ID.</p>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Curl</label><label for="__tabbed_5_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://api.kluster.ai/v1/files/kluster-output-file-123<span class="s2">&quot;/content \</span>
<span class="s2">-H &quot;</span>Authorization:<span class="w"> </span>Bearer<span class="w"> </span><span class="nv">$API_KEY</span><span class="s2">&quot; &gt; batch_output.jsonl</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example request</span><pre><span></span><code>    <span class="c1"># Check if the batch completed successfully</span>
    <span class="k">if</span> <span class="n">batch_status</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;completed&quot;</span><span class="p">:</span>
        <span class="c1"># Retrieve the results</span>
        <span class="n">result_file_id</span> <span class="o">=</span> <span class="n">batch_status</span><span class="o">.</span><span class="n">output_file_id</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">content</span><span class="p">(</span><span class="n">result_file_id</span><span class="p">)</span><span class="o">.</span><span class="n">content</span>

        <span class="c1"># Save results to a file</span>
        <span class="n">result_file_name</span> <span class="o">=</span> <span class="s2">&quot;data/batch_results.jsonl&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">result_file_name</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Results saved to </span><span class="si">{</span><span class="n">result_file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Batch failed with status: </span><span class="si">{</span><span class="n">batch_status</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
<hr />
<h2 id="list-all-batch-jobs">List all Batch Jobs<a class="headerlink" href="#list-all-batch-jobs" title="Permanent link">＃</a></h2>
<p><code>get https://api.kluster.ai/v1/batches</code></p>
<p>To list all of your <a href="#the-batch-object">Batch</a> objects, send a request to the batches endpoint without specifying a batch_id. To constrain the query response, you can also use a limit parameter.</p>
<div class="grid">
<div>
<p><strong>Query parameters</strong></p>
<p><code>after</code> <span class="keys"><kbd>string</kbd></span></p>
<p>A cursor for use in pagination. <code>after</code> is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with <code>obj_foo</code>, your subsequent call can include <code>after=obj_foo</code> in order to fetch the next page of the list.</p>
<hr />
<p><code>limit</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>A limit on the number of objects to be returned. Limit can range between 1 and 100, and the</p>
<p><strong>Returns</strong></p>
<p>A list of paginated <a href="#the-batch-object">Batch</a> objects.</p>
<p>The status of a Batch object can be one of the following:</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>validating</code></td>
<td>The input file is being validated.</td>
</tr>
<tr>
<td><code>failed</code></td>
<td>The input file failed the validation process.</td>
</tr>
<tr>
<td><code>in_progress</code></td>
<td>The input file was successfully validated and the Batch is in progress.</td>
</tr>
<tr>
<td><code>finalizing</code></td>
<td>The Batch job has completed and the results are being finalized.</td>
</tr>
<tr>
<td><code>completed</code></td>
<td>The Batch has completed and the results are ready.</td>
</tr>
<tr>
<td><code>expired</code></td>
<td>The Batch was not completed within the 24-hour time window.</td>
</tr>
<tr>
<td><code>cancelling</code></td>
<td>The Batch is being cancelled (may take up to 10 minutes).</td>
</tr>
<tr>
<td><code>cancelled</code></td>
<td>The Batch was cancelled.</td>
</tr>
</tbody>
</table>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Curl</label><label for="__tabbed_6_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example</span><pre><span></span><code>curl<span class="w"> </span>https://api.kluster.ai/v1/batches<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example</span><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">Co</span><span class="kc">nf</span><span class="err">igure</span><span class="w"> </span><span class="err">Ope</span><span class="kc">n</span><span class="err">AI</span><span class="w"> </span><span class="err">clie</span><span class="kc">nt</span>
<span class="err">clie</span><span class="kc">nt</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">Ope</span><span class="kc">n</span><span class="err">AI(</span>
<span class="w">    </span><span class="err">base_url=</span><span class="s2">&quot;https://api.kluster.ai/v1&quot;</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">Cha</span><span class="kc">n</span><span class="err">ge</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="s2">&quot;http://localhost:9000/api/v1&quot;</span><span class="w"> </span><span class="kc">f</span><span class="err">or</span><span class="w"> </span><span class="err">local</span><span class="w"> </span><span class="err">developme</span><span class="kc">nt</span>
<span class="w">    </span><span class="err">api_key=my_api_key</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">Replace</span><span class="w"> </span><span class="err">wi</span><span class="kc">t</span><span class="err">h</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">ac</span><span class="kc">tual</span><span class="w"> </span><span class="err">API</span><span class="w"> </span><span class="err">key</span>
<span class="err">)</span>

<span class="err">pri</span><span class="kc">nt</span><span class="err">(clie</span><span class="kc">nt</span><span class="err">.ba</span><span class="kc">t</span><span class="err">ches.lis</span><span class="kc">t</span><span class="err">(limi</span><span class="kc">t</span><span class="err">=</span><span class="mi">2</span><span class="err">))</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Response</span><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;list&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;92aa978c-9dd1-49af-baa8-485ae6fb8019&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;input_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-input-file-123&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;completion_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;24h&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Completed&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;output_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-output-file-123&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;error_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-07T16:53:53.046181Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;in_progress_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-08T16:53:53.046181Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;finalizing_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;completed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;failed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;expired_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;cancelling_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;cancelled_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;request_counts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;failed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;first_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;92aa978c-9dd1-49af-baa8-485ae6fb8019&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0d29e406-51b2-4e5b-a9f4-6cb460eaeb59&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;has_more&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;page&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;page_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;items_per_page&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9223372036854775807</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
</div>
</div>
<hr />
<h2 id="cancelling-a-batch-job">Cancelling a Batch Job<a class="headerlink" href="#cancelling-a-batch-job" title="Permanent link">＃</a></h2>
<p><code>post https://api.kluster.ai/v1/batches/{batch_id}/cancel</code></p>
<p>To cancel an in-progress Batch job, send a cancel request to the batches endpoint specifying the <code>batch_id</code>.</p>
<div class="grid">
<div>
<p><strong>Path parameters</strong></p>
<p><code>batch_id</code> <span class="keys"><kbd>string</kbd></span> <span class="required" markdown><span class="keys"><kbd>Required</kbd></span></span></p>
<p>The ID of the Batch to cancel.</p>
<p><strong>Returns</strong></p>
<p>The <a href="#the-batch-object">Batch</a> object matching the specified ID.</p>
</div>
<div>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Curl</label><label for="__tabbed_7_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example</span><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://api.kluster.ai/v1/batches/<span class="nv">$BATCH_ID</span>/cancel<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_KEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
-X<span class="w"> </span>POST
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Example</span><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://api.kluster.ai/v1&quot;</span><span class="p">,</span>  
    <span class="n">api_key</span><span class="o">=</span><span class="n">my_api_key</span><span class="p">,</span>  <span class="c1"># Replace with your actual API key</span>
<span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="s2">&quot;kluster_123&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Response</span><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;642853d4-e816-4be2-8453-6ce6f0f00b9c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/v1/chat/completions&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;input_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-input-file-123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;completion_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;24h&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cancelling&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;output_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kluster-output-file-123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error_file_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-07T17:15:09.885223Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;in_progress_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-08T17:15:09.885223Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;finalizing_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;completed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;failed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expired_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cancelling_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-10-07T17:15:17.934748Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cancelled_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_counts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;failed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<hr />
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">＃</a></h2>
<p>You've now run a simple Batch use case by sending a collection of Batch request input objects to the chat completion end point, monitored the Batch interface for the progress of the job, and downloaded the result of the Batch job. To learn more about the end points we support, refer to the API documentation (link).</p>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">＃</a></h2>
<h3 id="the-batch-object">The Batch Object<a class="headerlink" href="#the-batch-object" title="Permanent link">＃</a></h3>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the Batch job.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>batch</code>.</p>
<hr />
<p><code>endpoint</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The Kluster.ai API endpoint used by the batch.</p>
<hr />
<p><code>errors</code> <span class="keys"><kbd>object</kbd></span></p>
<p>An object containing error information.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type, which is always <code>list</code>.</p>
<hr />
<p><code>data</code> <span class="keys"><kbd>array</kbd></span></p>
<details class="child">
<summary>Show properties</summary>
<p><code>code</code> <span class="keys"><kbd>string</kbd></span></p>
<p>An error code identifying the error type.</p>
<hr />
<p><code>message</code> <span class="keys"><kbd>string</kbd></span></p>
<p>A human-readable message providing more details about the error.</p>
<hr />
<p><code>param</code> <span class="keys"><kbd>string or null</kbd></span></p>
<p>The name of the parameter that caused the error, if applicable.</p>
<hr />
<p><code>line</code> <span class="keys"><kbd>integer or null</kbd></span></p>
<p>The line number of the input file where the error occurred, if applicable.</p>
</details>
</details>
<hr />
<p><code>input_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the input file for the batch.</p>
<hr />
<p><code>completion_window</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The time frame within which the batch should be processed.</p>
<hr />
<p><code>status</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The current status of the batch.</p>
<hr />
<p><code>output_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the file containing the outputs of successfully executed requests.</p>
<hr />
<p><code>error_file_id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The ID of the file containing the outputs of requests with errors.</p>
<hr />
<p><code>created_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was created.</p>
<hr />
<p><code>in_progress_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started processing.</p>
<hr />
<p><code>expires_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch will expire.</p>
<hr />
<p><code>finalizing_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started finalizing.</p>
<hr />
<p><code>completed_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was completed.</p>
<hr />
<p><code>failed_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch failed.</p>
<hr />
<p><code>expired_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch expired.</p>
<hr />
<p><code>cancelling_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch started cancelling.</p>
<hr />
<p><code>cancelled_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) for when the Batch was cancelled.</p>
<hr />
<p><code>request_counts</code> <span class="keys"><kbd>object</kbd></span></p>
<p>The request counts for different statuses within the Batch.</p>
<details class="child">
<summary>Show properties</summary>
<p><code>total</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Total number of requests in the batch.</p>
<hr />
<p><code>completed</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Number of requests that have been completed successfully.</p>
<hr />
<p><code>failed</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>Number of requests that have failed.</p>
</details>
<hr />
<p><code>metadata</code> <span class="keys"><kbd>map</kbd></span></p>
<p>Set of 16 key-value pairs that can be attached to an object. This is useful for storing additional information about the object in a structured format. Keys can be a maximum of 64 characters long and values can be a maximum of 512 characters long.</p>
<h3 id="the-file-object">The File Object<a class="headerlink" href="#the-file-object" title="Permanent link">＃</a></h3>
<p>The File object represents a document that has been uploaded to Kluster.ai.</p>
<p><code>id</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The file identifier referenced in the API endpoints.</p>
<hr />
<p><code>bytes</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The size of the file in bytes.</p>
<hr />
<p><code>created_at</code> <span class="keys"><kbd>integer</kbd></span></p>
<p>The Unix timestamp (in seconds) of when the file was created.</p>
<hr />
<p><code>filename</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The name of the file.</p>
<hr />
<p><code>object</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The object type which is always <code>file</code>.</p>
<hr />
<p><code>purpose</code> <span class="keys"><kbd>string</kbd></span></p>
<p>The intended purpose of the file. <code>batch</code> and <code>batch_output</code> are the supported values.</p>
<hr />
<p><code>status</code> <span class="keys"><kbd>string</kbd></span> <em>deprecated</em></p>
<p>The current status of the file, which can be either uploaded, processed, or error.</p>
<hr />
<p><code>status_details</code> <span class="keys"><kbd>string</kbd></span> <em>deprecated</em></p>
<p>For details on why a fine-tuning training file failed validation, see the error field on fine_tuning.job.</p>







  
  




  



      
    </article>
  </div>
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2024 kluster.ai. All rights reserved.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/klusterai" target="_blank" rel="noopener" title="X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/kluster-ai/" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.instagram.com/klusterai/" target="_blank" rel="noopener" title="Instagram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.facebook.com/profile.php?id=61558614587340" target="_blank" rel="noopener" title="Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer", "content.code.copy", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>